# å¯è§†åŒ–é¢æ¿ä½¿ç”¨æŒ‡å—

## ğŸ“– æ¦‚è¿°

AIQuantå¯è§†åŒ–é¢æ¿æ˜¯ä¸€ä¸ªåŸºäºStreamlitçš„äº¤äº’å¼Webåº”ç”¨ï¼Œæä¾›ç›´è§‚çš„ç•Œé¢æ¥ç›‘æ§è®­ç»ƒè¿›åº¦ã€æŸ¥çœ‹æ¨¡å‹æ€§èƒ½ã€åˆ†æé¢„æµ‹ç»“æœã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install streamlit plotly
```

### 2. å¯åŠ¨é¢æ¿

```bash
# æ–¹æ³•1: ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
bash start_dashboard.sh

# æ–¹æ³•2: ç›´æ¥è¿è¡Œ
streamlit run app.py

# æ–¹æ³•3: æŒ‡å®šç«¯å£
streamlit run app.py --server.port 8501
```

### 3. è®¿é—®é¢æ¿

æ‰“å¼€æµè§ˆå™¨è®¿é—®: **http://localhost:8501**

## ğŸ“Š åŠŸèƒ½ä»‹ç»

### ğŸ  æ€»è§ˆé¡µé¢

**ä¸»è¦å†…å®¹**ï¼š
- å…³é”®æŒ‡æ ‡å¡ç‰‡ï¼ˆæ ·æœ¬æ•°é‡ã€ç‰¹å¾ç»´åº¦ã€é¢„æµ‹æ•°é‡ã€æ¨¡å‹ç‰ˆæœ¬ï¼‰
- æœ€æ–°åŠ¨æ€ï¼ˆè®­ç»ƒè¿›åº¦ã€ç½‘ç»œç›‘æ§çŠ¶æ€ï¼‰
- æœ€æ–°æ—¥å¿—ï¼ˆå®æ—¶æ˜¾ç¤ºè®­ç»ƒæ—¥å¿—å°¾éƒ¨ï¼‰
- å¿«é€Ÿæ“ä½œæŒ‰é’®
- ç³»ç»ŸçŠ¶æ€æŒ‡ç¤º

**ä½¿ç”¨åœºæ™¯**ï¼š
- å¿«é€Ÿäº†è§£ç³»ç»Ÿæ•´ä½“çŠ¶æ€
- æŸ¥çœ‹æœ€æ–°è®­ç»ƒè¿›å±•
- ä¸€é”®è·³è½¬åˆ°å…¶ä»–åŠŸèƒ½

### ğŸ“Š è®­ç»ƒç›‘æ§

**ä¸»è¦å†…å®¹**ï¼š
- è®­ç»ƒç»Ÿè®¡ï¼ˆå·²æ‰¾åˆ°æ ·æœ¬ã€è¿›åº¦ç™¾åˆ†æ¯”ã€å‰©ä½™æ—¶é—´ï¼‰
- è¿›åº¦æ¡ï¼ˆå¯è§†åŒ–è®­ç»ƒè¿›åº¦ï¼‰
- æ ·æœ¬å‘ç°è¶‹åŠ¿å›¾ï¼ˆç´¯è®¡æ ·æœ¬æ•°éšæ—¶é—´å˜åŒ–ï¼‰
- å®æ—¶æ—¥å¿—æŸ¥çœ‹ï¼ˆæœ€æ–°50è¡Œï¼‰

**ä½¿ç”¨åœºæ™¯**ï¼š
- ç›‘æ§é•¿æ—¶é—´è¿è¡Œçš„è®­ç»ƒä»»åŠ¡
- è¯„ä¼°è®­ç»ƒé€Ÿåº¦å’Œé¢„è®¡å®Œæˆæ—¶é—´
- è¯Šæ–­è®­ç»ƒé—®é¢˜

**åˆ·æ–°é¢‘ç‡**ï¼š
- è‡ªåŠ¨ç¼“å­˜60ç§’
- ç‚¹å‡»"åˆ·æ–°æ—¥å¿—"æŒ‰é’®ç«‹å³æ›´æ–°

### ğŸ¯ æ¨¡å‹è¯„ä¼°

**ä¸»è¦å†…å®¹**ï¼š
- Walk-ForwardéªŒè¯ç»“æœæ€»è§ˆ
- å„æ—¶é—´çª—å£æ€§èƒ½å¯¹æ¯”å›¾è¡¨ï¼ˆå‡†ç¡®ç‡ã€AUCã€ç²¾ç¡®ç‡ã€å¬å›ç‡ï¼‰
- è¯¦ç»†æ•°æ®è¡¨æ ¼
- æ•°æ®è´¨é‡æŠ¥å‘Š

**å…³é”®æŒ‡æ ‡**ï¼š
- **éªŒè¯çª—å£æ•°**: æµ‹è¯•äº†å¤šå°‘ä¸ªæ—¶é—´æ®µ
- **å¹³å‡å‡†ç¡®ç‡**: æ¨¡å‹å¹³å‡é¢„æµ‹å‡†ç¡®ç‡
- **å¹³å‡AUC**: å¹³å‡AUC-ROCå¾—åˆ†
- **å‡†ç¡®ç‡æ ‡å‡†å·®**: è¯„ä¼°æ¨¡å‹ç¨³å®šæ€§

**å›¾è¡¨è§£è¯»**ï¼š
- **æ¨ªè½´**: æ—¶é—´çª—å£IDï¼ˆè¶Šå¤§è¶Šæ¥è¿‘ç°åœ¨ï¼‰
- **çºµè½´**: æ€§èƒ½æŒ‡æ ‡å€¼
- **è¶‹åŠ¿**: åº”ä¿æŒç›¸å¯¹ç¨³å®šï¼Œå¤§å¹…æ³¢åŠ¨è¯´æ˜æ¨¡å‹ä¸å¤Ÿé²æ£’

**ä½¿ç”¨åœºæ™¯**ï¼š
- è¯„ä¼°æ¨¡å‹æ³›åŒ–èƒ½åŠ›
- æ£€æŸ¥æ¨¡å‹åœ¨ä¸åŒå¸‚åœºç¯å¢ƒä¸‹çš„è¡¨ç°
- å†³å®šæ˜¯å¦éœ€è¦é‡æ–°è®­ç»ƒ

### ğŸ’ é¢„æµ‹ç»“æœ

**ä¸»è¦å†…å®¹**ï¼š
- é¢„æµ‹ç»Ÿè®¡ï¼ˆå¹³å‡æ¦‚ç‡ã€æœ€é«˜æ¦‚ç‡ã€é«˜æ¦‚ç‡è‚¡ç¥¨æ•°ã€é¢„æµ‹æ—¥æœŸï¼‰
- ç‰›è‚¡æ¦‚ç‡åˆ†å¸ƒç›´æ–¹å›¾
- Top 20æ¨èè‚¡ç¥¨è¡¨æ ¼
- å®Œæ•´ç»“æœä¸‹è½½ï¼ˆCSVæ ¼å¼ï¼‰
- é¢„æµ‹æŠ¥å‘ŠæŸ¥çœ‹

**æ•°æ®å­—æ®µè¯´æ˜**ï¼š
- **è‚¡ç¥¨ä»£ç **: å¦‚ 000001.SZ
- **è‚¡ç¥¨åç§°**: å…¬å¸åç§°
- **ç‰›è‚¡æ¦‚ç‡**: æ¨¡å‹é¢„æµ‹çš„ä¸Šæ¶¨æ¦‚ç‡ï¼ˆ0-1ï¼‰
- **æ•°æ®æ—¥æœŸ**: ä½¿ç”¨çš„æœ€æ–°æ•°æ®æ—¥æœŸ
- **æœ€æ–°ä»·æ ¼**: æœ€æ–°æ”¶ç›˜ä»·
- **34æ—¥æ¶¨å¹…%**: æœ€è¿‘34å¤©çš„æ¶¨è·Œå¹…
- **å…¶ä»–æŒ‡æ ‡**: æ ¹æ®é…ç½®å¯èƒ½åŒ…å«æ›´å¤šå­—æ®µ

**æ“ä½œæŠ€å·§**ï¼š
- ç‚¹å‡»è¡¨å¤´æ’åº
- ä½¿ç”¨æœç´¢æ¡†è¿‡æ»¤
- ä¸‹è½½å®Œæ•´ç»“æœè¿›è¡ŒäºŒæ¬¡åˆ†æ

**ä½¿ç”¨åœºæ™¯**ï¼š
- æ¯å‘¨é€‰è‚¡
- æ„å»ºæŠ•èµ„ç»„åˆ
- å›æµ‹å†å²é¢„æµ‹

### ğŸ“ˆ å›æµ‹åˆ†æ

**çŠ¶æ€**: ğŸš§ å¼€å‘ä¸­

**è®¡åˆ’åŠŸèƒ½**ï¼š
- å†å²é¢„æµ‹å›é¡¾ï¼ˆèƒœç‡ç»Ÿè®¡ï¼‰
- æ”¶ç›Šæ›²çº¿å¯è§†åŒ–
- é£é™©æŒ‡æ ‡è®¡ç®—ï¼ˆæœ€å¤§å›æ’¤ã€å¤æ™®æ¯”ç‡ã€å¡ç›æ¯”ç‡ï¼‰
- æŒä»“åˆ†æï¼ˆåˆ†å¸ƒã€æ¢æ‰‹ç‡ï¼‰
- å¸‚åœºå¯¹æ¯”ï¼ˆä¸æŒ‡æ•°å¯¹æ¯”ï¼‰

### âš™ï¸ ç³»ç»ŸçŠ¶æ€

**ä¸»è¦å†…å®¹**ï¼š
- å…³é”®æ–‡ä»¶çŠ¶æ€æ£€æŸ¥ï¼ˆæ˜¯å¦å­˜åœ¨ã€æ–‡ä»¶å¤§å°ï¼‰
- æ—¥å¿—æ–‡ä»¶åˆ—è¡¨ï¼ˆæœ€æ–°10ä¸ªï¼‰
- ç³»ç»Ÿä¿¡æ¯ï¼ˆç‰ˆæœ¬ã€é…ç½®ï¼‰

**æ–‡ä»¶çŠ¶æ€æŒ‡ç¤º**ï¼š
- âœ… ç»¿è‰²ï¼šæ–‡ä»¶å­˜åœ¨ä¸”æ­£å¸¸
- âŒ çº¢è‰²ï¼šæ–‡ä»¶ä¸å­˜åœ¨æˆ–å¼‚å¸¸

**ä½¿ç”¨åœºæ™¯**ï¼š
- è¯Šæ–­ç³»ç»Ÿé—®é¢˜
- æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
- æ¸…ç†æ—¥å¿—æ–‡ä»¶

## ğŸ¨ ç•Œé¢è¯´æ˜

### ä¾§è¾¹æ 

**å¯¼èˆªèœå•**ï¼š
- å•é€‰æŒ‰é’®åˆ‡æ¢é¡µé¢
- æ¸…æ™°çš„å›¾æ ‡æ ‡è¯†

**å¿«é€Ÿé“¾æ¥**ï¼š
- ä½¿ç”¨æ–‡æ¡£
- é…ç½®ç®¡ç†
- æ—¥å¿—æŸ¥çœ‹

**çŠ¶æ€æç¤º**ï¼š
- æ˜¾ç¤ºå½“å‰è®­ç»ƒçŠ¶æ€
- é¢„è®¡å®Œæˆæ—¶é—´

### ä¸»å†…å®¹åŒº

**å¸ƒå±€**ï¼š
- å®½å±å¸ƒå±€ï¼Œå……åˆ†åˆ©ç”¨ç©ºé—´
- å“åº”å¼è®¾è®¡ï¼Œé€‚é…ä¸åŒå±å¹•

**é…è‰²**ï¼š
- è“è‰²ä¸»é¢˜ï¼Œä¸“ä¸šæ¸…çˆ½
- æˆåŠŸ/è­¦å‘Š/é”™è¯¯æœ‰æ˜ç¡®çš„é¢œè‰²åŒºåˆ†

### äº¤äº’å…ƒç´ 

**æŒ‰é’®**ï¼š
- åˆ·æ–°æ•°æ®
- åˆ‡æ¢é¡µé¢
- ä¸‹è½½ç»“æœ

**å›¾è¡¨**ï¼š
- äº¤äº’å¼Plotlyå›¾è¡¨
- æ”¯æŒç¼©æ”¾ã€æ‚¬åœæŸ¥çœ‹è¯¦æƒ…
- å¯ä¸‹è½½ä¸ºå›¾ç‰‡

## ğŸ“– å¸¸è§é—®é¢˜

### Q1: é¢æ¿æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**: è¿è¡Œå‘½ä»¤åæŠ¥é”™

**è§£å†³**:
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python --version  # éœ€è¦3.8+

# é‡æ–°å®‰è£…ä¾èµ–
pip install --upgrade streamlit plotly pandas

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8501
```

### Q2: æ•°æ®ä¸æ˜¾ç¤º

**ç—‡çŠ¶**: é¡µé¢æ˜¾ç¤º"æš‚æ— æ•°æ®"

**åŸå› **: 
- æ•°æ®æ–‡ä»¶ä¸å­˜åœ¨
- æ–‡ä»¶è·¯å¾„é”™è¯¯
- æ–‡ä»¶æ ¼å¼é”™è¯¯

**è§£å†³**:
```bash
# æ£€æŸ¥æ•°æ®æ–‡ä»¶
ls -lh data/processed/
ls -lh data/predictions/
ls -lh data/backtest/reports/

# ç”Ÿæˆç¼ºå¤±çš„æ•°æ®
python scripts/prepare_positive_samples.py
python scripts/score_current_stocks.py
python scripts/walk_forward_validation.py
```

### Q3: å›¾è¡¨ä¸æ˜¾ç¤º

**ç—‡çŠ¶**: é¡µé¢æœ‰å†…å®¹ä½†å›¾è¡¨ç©ºç™½

**åŸå› **: Plotlyåº“é—®é¢˜

**è§£å†³**:
```bash
pip install --upgrade plotly kaleido
```

### Q4: é¡µé¢å¡é¡¿

**ç—‡çŠ¶**: åˆ‡æ¢é¡µé¢æ…¢ï¼Œå“åº”å»¶è¿Ÿ

**åŸå› **: 
- æ•°æ®æ–‡ä»¶è¿‡å¤§
- ç¼“å­˜æœªå¯ç”¨
- ç³»ç»Ÿèµ„æºä¸è¶³

**è§£å†³**:
- ä½¿ç”¨ç¼“å­˜è£…é¥°å™¨ï¼ˆå·²å†…ç½®ï¼‰
- å‡å°‘æ˜¾ç¤ºçš„æ•°æ®é‡
- å¢åŠ ç³»ç»Ÿå†…å­˜

### Q5: å®æ—¶æ›´æ–°ä¸åŠæ—¶

**ç—‡çŠ¶**: è®­ç»ƒæ—¥å¿—ä¸æ˜¯æœ€æ–°çš„

**åŸå› **: Streamlitçš„ç¼“å­˜æœºåˆ¶

**è§£å†³**:
- ç‚¹å‡»"åˆ·æ–°æ•°æ®"æŒ‰é’®
- è°ƒæ•´ç¼“å­˜TTLï¼ˆtime-to-liveï¼‰
- æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜ï¼šç‚¹å‡»å³ä¸Šè§’èœå• â†’ Clear cache

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹ç«¯å£

ç¼–è¾‘ `.streamlit/config.toml`ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰ï¼š

```toml
[server]
port = 8501
address = "localhost"

[theme]
primaryColor = "#1f77b4"
backgroundColor = "#ffffff"
secondaryBackgroundColor = "#f0f2f6"
textColor = "#262730"
```

### ä¿®æ”¹ç¼“å­˜æ—¶é—´

ç¼–è¾‘ `app.py`ï¼š

```python
@st.cache_data(ttl=60)  # æ”¹ä¸ºä½ æƒ³è¦çš„ç§’æ•°
def load_training_log():
    ...
```

### æ·»åŠ æ–°é¡µé¢

1. åœ¨ä¾§è¾¹æ æ·»åŠ å¯¼èˆªé¡¹ï¼š
```python
page = st.radio(
    "å¯¼èˆª",
    [..., "ğŸ†• æ–°é¡µé¢"],
    index=0
)
```

2. æ·»åŠ é¡µé¢å†…å®¹ï¼š
```python
elif page == "ğŸ†• æ–°é¡µé¢":
    st.header("ğŸ†• æ–°é¡µé¢")
    # ä½ çš„å†…å®¹
```

### è‡ªå®šä¹‰ä¸»é¢˜

åˆ›å»º `.streamlit/config.toml`ï¼š

```toml
[theme]
primaryColor = "#FF4B4B"
backgroundColor = "#0E1117"
secondaryBackgroundColor = "#262730"
textColor = "#FAFAFA"
font = "sans serif"
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. å¯ç”¨ç¼“å­˜

æ‰€æœ‰æ•°æ®åŠ è½½å‡½æ•°éƒ½ä½¿ç”¨ `@st.cache_data` è£…é¥°å™¨ï¼š

```python
@st.cache_data(ttl=300)  # ç¼“å­˜5åˆ†é’Ÿ
def load_data():
    return pd.read_csv("data.csv")
```

### 2. åˆ†é¡µæ˜¾ç¤º

å¯¹äºå¤§æ•°æ®é›†ï¼Œä½¿ç”¨åˆ†é¡µï¼š

```python
# åªæ˜¾ç¤ºå‰1000è¡Œ
df_display = df.head(1000)
st.dataframe(df_display)
```

### 3. å¼‚æ­¥åŠ è½½

ä½¿ç”¨ Streamlit çš„å¼‚æ­¥ç‰¹æ€§ï¼š

```python
with st.spinner('åŠ è½½ä¸­...'):
    data = load_large_dataset()
```

### 4. å‡å°‘é‡å¤æ¸²æŸ“

é¿å…åœ¨å¾ªç¯ä¸­è°ƒç”¨æ¸²æŸ“å‡½æ•°ï¼š

```python
# âŒ æ…¢
for item in items:
    st.write(item)

# âœ… å¿«
st.write("\n".join(items))
```

## ğŸš€ é«˜çº§åŠŸèƒ½

### åå°è¿è¡Œ

```bash
# ä½¿ç”¨nohupåå°è¿è¡Œ
nohup streamlit run app.py > logs/dashboard.log 2>&1 &

# æŸ¥çœ‹PID
ps aux | grep streamlit

# åœæ­¢
pkill -f "streamlit run"
```

### è¿œç¨‹è®¿é—®

```bash
# å…è®¸å¤–éƒ¨è®¿é—®
streamlit run app.py --server.address 0.0.0.0 --server.port 8501

# è®¿é—®: http://your-ip:8501
```

### å¯†ç ä¿æŠ¤

åˆ›å»º `.streamlit/secrets.toml`ï¼š

```toml
password = "your_password_here"
```

åœ¨ `app.py` å¼€å¤´æ·»åŠ ï¼š

```python
import streamlit as st

# å¯†ç éªŒè¯
if 'authenticated' not in st.session_state:
    st.session_state.authenticated = False

if not st.session_state.authenticated:
    password = st.text_input("è¯·è¾“å…¥å¯†ç ", type="password")
    if st.button("ç™»å½•"):
        if password == st.secrets["password"]:
            st.session_state.authenticated = True
            st.rerun()
        else:
            st.error("å¯†ç é”™è¯¯")
    st.stop()
```

### Dockeréƒ¨ç½²

åˆ›å»º `Dockerfile`ï¼š

```dockerfile
FROM python:3.9-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .

EXPOSE 8501

CMD ["streamlit", "run", "app.py", "--server.port=8501", "--server.address=0.0.0.0"]
```

æ„å»ºå’Œè¿è¡Œï¼š

```bash
docker build -t aiquant-dashboard .
docker run -p 8501:8501 -v $(pwd)/data:/app/data aiquant-dashboard
```

## ğŸ“± ç§»åŠ¨ç«¯é€‚é…

Streamlitè‡ªåŠ¨é€‚é…ç§»åŠ¨ç«¯ï¼Œä½†ä½ å¯ä»¥ä¼˜åŒ–ï¼š

```python
# æ£€æµ‹è®¾å¤‡ç±»å‹
import streamlit as st

# ç§»åŠ¨ç«¯ä½¿ç”¨å•åˆ—å¸ƒå±€
if st.session_state.get('mobile', False):
    cols = [st.container()]
else:
    cols = st.columns(3)
```

## ğŸ”— é›†æˆå…¶ä»–å·¥å…·

### Jupyter Notebook

åœ¨Notebookä¸­åµŒå…¥ï¼š

```python
!streamlit run app.py &
from IPython.display import IFrame
IFrame('http://localhost:8501', width=1000, height=800)
```

### VS Code

å®‰è£… Streamlit æ‰©å±•ï¼Œç›´æ¥åœ¨ VS Code ä¸­é¢„è§ˆã€‚

### APIè°ƒç”¨

è™½ç„¶Streamlitä¸»è¦ç”¨äºç•Œé¢ï¼Œä½†å¯ä»¥é€šè¿‡session stateå®ç°ç®€å•çš„APIï¼š

```python
# app.py
if st.experimental_get_query_params().get('api'):
    # è¿”å›JSONæ•°æ®
    st.json({"status": "ok", "data": data})
```

## ğŸ“š å‚è€ƒèµ„æº

- [Streamlit å®˜æ–¹æ–‡æ¡£](https://docs.streamlit.io/)
- [Plotly å›¾è¡¨åº“](https://plotly.com/python/)
- [Streamlit Gallery](https://streamlit.io/gallery)
- [Awesome Streamlit](https://github.com/MarcSkovMadsen/awesome-streamlit)

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å®šæœŸæ›´æ–°æ•°æ®**: è®¾ç½®åˆç†çš„ç¼“å­˜æ—¶é—´
2. **é”™è¯¯å¤„ç†**: ä½¿ç”¨try-exceptå¤„ç†æ–‡ä»¶è¯»å–é”™è¯¯
3. **ç”¨æˆ·åé¦ˆ**: ä½¿ç”¨st.success/warning/erroræä¾›æ¸…æ™°åé¦ˆ
4. **æ€§èƒ½ç›‘æ§**: ä½¿ç”¨st.spinneræ˜¾ç¤ºåŠ è½½çŠ¶æ€
5. **æ–‡æ¡£å®Œå–„**: ä½¿ç”¨st.expanderæä¾›å¸®åŠ©ä¿¡æ¯

---

**æœ€åæ›´æ–°**: 2025-12-24  
**ç‰ˆæœ¬**: v1.0

