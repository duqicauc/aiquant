# MACD参数选择对比分析

## 📊 参数对比

### 标准MACD（12/26/9）

**参数设置**：
- 快线EMA：12日
- 慢线EMA：26日
- 信号线DEA：9日

**计算公式**：
```
EMA12 = 12日指数移动平均
EMA26 = 26日指数移动平均
DIF = EMA12 - EMA26
DEA = DIF的9日EMA
MACD = 2 × (DIF - DEA)
```

### MACD5（5/10/3）

**参数设置**：
- 快线EMA：5日
- 慢线EMA：10日
- 信号线DEA：3日

**特点**：
- 更敏感，反应更快
- 适合短期交易（1-5天）
- 信号频率高，但假信号多

### MACD20（20/40/9）

**参数设置**：
- 快线EMA：20日
- 慢线EMA：40日
- 信号线DEA：9日

**特点**：
- 更平滑，反应较慢
- 适合中长期趋势（2-4周）
- 信号频率低，但可靠性高

---

## 🎯 你的场景分析

### 任务特点

| 维度 | 你的场景 |
|------|---------|
| **预测周期** | 未来3周（约15个交易日） |
| **历史数据** | T1前34天 |
| **目标** | 识别涨幅>50%的潜力股 |
| **样本特征** | 周K三连阳，34天累计涨幅>40% |

### 结论：**中期预测任务**

- 不是超短期（1-3天）
- 不是超长期（3-6个月）
- 是**中期趋势预测**（2-4周）

---

## ⚖️ 对比分析

### 1. 敏感度对比

| 指标 | 标准MACD | MACD5 | MACD20 |
|------|---------|-------|--------|
| **反应速度** | 中等 | 快 | 慢 |
| **信号频率** | 中等 | 高 | 低 |
| **假信号率** | 中等 | 高 | 低 |
| **趋势捕捉** | 中期 | 短期 | 长期 |

### 2. 适用场景

| 场景 | 标准MACD | MACD5 | MACD20 |
|------|---------|-------|--------|
| **超短期交易（1-3天）** | ❌ | ✅ | ❌ |
| **短期交易（1周）** | ⚠️ | ✅ | ❌ |
| **中期预测（2-4周）** | ✅ | ⚠️ | ⚠️ |
| **长期趋势（1-3月）** | ⚠️ | ❌ | ✅ |

### 3. 数据质量

| 指标 | 标准MACD | MACD5 | MACD20 |
|------|---------|-------|--------|
| **数据来源** | Tushare直接提供 | 需自己计算 | 需自己计算 |
| **数据质量** | 高（专业维护） | 依赖实现 | 依赖实现 |
| **一致性** | 高（业界标准） | 需验证 | 需验证 |

---

## 💡 建议

### 🥇 推荐：**标准MACD（12/26/9）**

#### 理由

1. **匹配你的预测周期**
   - 你的目标是预测未来3周（中期）
   - 标准MACD最适合中期趋势判断
   - MACD5太敏感，MACD20太滞后

2. **数据质量有保障**
   - Tushare直接提供，无需自己计算
   - 经过专业团队验证和维护
   - 避免计算错误

3. **业界标准，可靠性高**
   - 12/26/9是经过长期市场验证的参数
   - 在金融领域广泛应用
   - 与其他技术指标兼容性好

4. **平衡敏感度和可靠性**
   - 不会过于敏感（减少假信号）
   - 不会过于滞后（能及时捕捉趋势）
   - 适合你的34天历史数据窗口

### 🥈 备选：**同时使用多个MACD参数**

如果数据充足，可以考虑：

```python
# 同时提取多个MACD参数
features = {
    'macd_standard_mean': macd_12_26_9.mean(),  # 标准MACD
    'macd_short_mean': macd_5_10_3.mean(),      # 短期MACD
    'macd_long_mean': macd_20_40_9.mean(),       # 长期MACD
}
```

**优势**：
- 捕捉不同时间尺度的趋势
- 模型可以自动选择重要特征
- 提高预测准确性

**劣势**：
- 特征维度增加（可能过拟合）
- 需要自己计算macd5和macd20
- 计算成本增加

---

## 📈 实际效果对比（建议实验）

### 实验设计

1. **方案A**：仅使用标准MACD（12/26/9）
2. **方案B**：仅使用MACD5（5/10/3）
3. **方案C**：仅使用MACD20（20/40/9）
4. **方案D**：同时使用三个MACD参数

### 评估指标

- 准确率（Accuracy）
- 精确率（Precision）
- 召回率（Recall）
- F1分数
- AUC-ROC

### 预期结果

基于理论分析，**方案A（标准MACD）**应该表现最好，因为：
- 匹配你的预测周期（中期）
- 数据质量高
- 业界验证

---

## 🔧 实现建议

### 当前实现（推荐保持）

```python
# 使用Tushare提供的标准MACD
df_factor = self.dm.get_stk_factor(ts_code, start_date, end_date)
# 包含: macd_dif, macd_dea, macd (12/26/9)
```

### 如果需要添加MACD5和MACD20

```python
# 在数据获取阶段添加
def calculate_macd5(df):
    """计算MACD5 (5/10/3)"""
    ema5 = df['close'].ewm(span=5, adjust=False).mean()
    ema10 = df['close'].ewm(span=10, adjust=False).mean()
    dif = ema5 - ema10
    dea = dif.ewm(span=3, adjust=False).mean()
    macd = (dif - dea) * 2
    return macd

def calculate_macd20(df):
    """计算MACD20 (20/40/9)"""
    ema20 = df['close'].ewm(span=20, adjust=False).mean()
    ema40 = df['close'].ewm(span=40, adjust=False).mean()
    dif = ema20 - ema40
    dea = dif.ewm(span=9, adjust=False).mean()
    macd = (dif - dea) * 2
    return macd
```

---

## 📝 总结

### 最终建议

**使用标准MACD（12/26/9）**，原因：

1. ✅ **最适合你的预测周期**（中期2-4周）
2. ✅ **数据质量有保障**（Tushare直接提供）
3. ✅ **业界标准，可靠性高**
4. ✅ **平衡敏感度和可靠性**
5. ✅ **实现简单，无需额外开发**

### 如果效果不理想

可以考虑：
- 同时使用多个MACD参数（标准+短期+长期）
- 结合其他技术指标（RSI、KDJ、BOLL等）
- 调整特征工程方法（增加统计特征）

---

**最后更新**：2025-12-25

