# å·¦ä¾§æ½œåŠ›ç‰›è‚¡ç­›é€‰ä¼˜åŒ–æ–¹æ¡ˆ

## ğŸ” é—®é¢˜è¯Šæ–­

### å½“å‰çŠ¶æ€
- **å¤„ç†è‚¡ç¥¨æ•°**: 4962åª
- **æˆåŠŸç‡**: 100%
- **æ‰¾åˆ°æ ·æœ¬**: 0ä¸ªï¼ˆæ­£è´Ÿæ ·æœ¬éƒ½ä¸ºç©ºï¼‰
- **è¿è¡Œæ—¶é—´**: çº¦4.3å°æ—¶

### é—®é¢˜åˆ†æ

#### 1. ç­›é€‰æ¡ä»¶è¿‡äºä¸¥æ ¼ âš ï¸ **æ ¸å¿ƒé—®é¢˜**

å½“å‰5ä¸ªæ¡ä»¶å¿…é¡»**å…¨éƒ¨æ»¡è¶³**ï¼š
1. **æ¡ä»¶1**: æœªæ¥45å¤©æ¶¨å¹… > 50% â­â­â­â­â­ï¼ˆéå¸¸ä¸¥æ ¼ï¼‰
2. **æ¡ä»¶2**: è¿‡å»60å¤©æ¶¨å¹… < 20%
3. **æ¡ä»¶3**: RSI < 70
4. **æ¡ä»¶4**: é‡æ¯” 1.5-3.0
5. **æ¡ä»¶5**: è‡³å°‘2ä¸ªé¢„è½¬ä¿¡å·ï¼ˆMACDé‡‘å‰/MA20çªç ´/é‡èƒ½æ”¾å¤§/å¸ƒæ—å¸¦æ”¯æ’‘ï¼‰

**é—®é¢˜**ï¼š
- æ¡ä»¶1ï¼ˆæœªæ¥45å¤©æ¶¨50%ï¼‰æœ¬èº«å°±å¾ˆéš¾æ»¡è¶³
- 5ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³çš„æ¦‚ç‡æä½
- å¯¼è‡´æ ·æœ¬æ•°é‡ä¸º0

#### 2. æ•°æ®çª—å£è¦æ±‚é«˜
- éœ€è¦105å¤©æ•°æ®ï¼ˆè¿‡å»60å¤©+æœªæ¥45å¤©ï¼‰
- å¦‚æœæ•°æ®ä¸è¶³ï¼Œæ•´ä¸ªè‚¡ç¥¨è¢«è·³è¿‡

#### 3. æŠ€æœ¯æŒ‡æ ‡ä¾èµ–
- éœ€è¦MACDã€RSIã€é‡æ¯”ã€å¸ƒæ—å¸¦ç­‰å®Œæ•´æ•°æ®
- å¦‚æœæ•°æ®ç¼ºå¤±ï¼ŒæŸäº›æ¡ä»¶å¯èƒ½å¤±è´¥

---

## ğŸ¯ ä¼˜åŒ–æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šæ”¾å®½ç­›é€‰æ¡ä»¶ï¼ˆæ¨èï¼‰â­

#### 1.1 é™ä½æ¶¨å¹…é˜ˆå€¼
```yaml
# å½“å‰é…ç½®
future_return_threshold: 50   # æœªæ¥45å¤©æ¶¨å¹… > 50%

# å»ºè®®è°ƒæ•´
future_return_threshold: 35   # æœªæ¥45å¤©æ¶¨å¹… > 35%
# æˆ–
future_return_threshold: 40   # æœªæ¥45å¤©æ¶¨å¹… > 40%
```

**ç†ç”±**ï¼š
- 50%æ¶¨å¹…åœ¨45å¤©å†…éå¸¸ç½•è§
- 35-40%æ›´ç¬¦åˆå®é™…å¸‚åœºæƒ…å†µ
- ä»èƒ½ç­›é€‰å‡ºä¼˜è´¨æ½œåŠ›è‚¡

#### 1.2 æ”¾å®½è¿‡å»æ¶¨å¹…é™åˆ¶
```yaml
# å½“å‰é…ç½®
past_return_threshold: 20     # è¿‡å»60å¤©æ¶¨å¹… < 20%

# å»ºè®®è°ƒæ•´
past_return_threshold: 30     # è¿‡å»60å¤©æ¶¨å¹… < 30%
```

**ç†ç”±**ï¼š
- 20%çš„é™åˆ¶å¯èƒ½è¿‡äºä¸¥æ ¼
- 30%ä»èƒ½ä¿è¯æ˜¯åº•éƒ¨éœ‡è¡

#### 1.3 æ”¾å®½é‡æ¯”èŒƒå›´
```yaml
# å½“å‰é…ç½®
volume_ratio_min: 1.5
volume_ratio_max: 3.0

# å»ºè®®è°ƒæ•´
volume_ratio_min: 1.2
volume_ratio_max: 4.0
```

**ç†ç”±**ï¼š
- 1.5-3.0çš„èŒƒå›´å¯èƒ½è¿‡çª„
- 1.2-4.0æ›´ç¬¦åˆå®é™…å¸‚åœºæƒ…å†µ

#### 1.4 é™ä½é¢„è½¬ä¿¡å·è¦æ±‚
```python
# å½“å‰ä»£ç 
return sum(signals) >= 2  # è‡³å°‘2ä¸ªä¿¡å·

# å»ºè®®è°ƒæ•´
return sum(signals) >= 1  # è‡³å°‘1ä¸ªä¿¡å·
```

**ç†ç”±**ï¼š
- è‡³å°‘2ä¸ªä¿¡å·è¦æ±‚è¾ƒé«˜
- è‡³å°‘1ä¸ªä¿¡å·æ›´çµæ´»

---

### æ–¹æ¡ˆ2ï¼šæ·»åŠ è°ƒè¯•æ—¥å¿—ï¼ˆè¯Šæ–­ç”¨ï¼‰

åœ¨ç­›é€‰è¿‡ç¨‹ä¸­è®°å½•æ¯ä¸ªæ¡ä»¶çš„é€šè¿‡/å¤±è´¥æƒ…å†µï¼š

```python
# åœ¨_is_left_breakout_sampleä¸­æ·»åŠ è¯¦ç»†æ—¥å¿—
log.debug(f"æ¡ä»¶1(æœªæ¥æ¶¨å¹…): {future_return:.2%} {'âœ“' if future_return >= 0.5 else 'âœ—'}")
log.debug(f"æ¡ä»¶2(è¿‡å»æ¶¨å¹…): {past_return:.2%} {'âœ“' if past_return <= 0.2 else 'âœ—'}")
# ...
```

**ç”¨é€”**ï¼š
- æ‰¾å‡ºæœ€ä¸¥æ ¼çš„ç“¶é¢ˆæ¡ä»¶
- ç»Ÿè®¡å„æ¡ä»¶çš„é€šè¿‡ç‡
- æŒ‡å¯¼åç»­ä¼˜åŒ–

---

### æ–¹æ¡ˆ3ï¼šåˆ†é˜¶æ®µç­›é€‰ï¼ˆæ¸è¿›å¼ï¼‰

#### é˜¶æ®µ1ï¼šåŸºç¡€ç­›é€‰ï¼ˆæ¶¨å¹…æ¡ä»¶ï¼‰
- åªæ£€æŸ¥æ¡ä»¶1å’Œ2ï¼ˆæœªæ¥æ¶¨å¹…å’Œè¿‡å»æ¶¨å¹…ï¼‰
- æ‰¾åˆ°æ›´å¤šå€™é€‰æ ·æœ¬

#### é˜¶æ®µ2ï¼šæŠ€æœ¯æŒ‡æ ‡ç­›é€‰
- åœ¨é€šè¿‡é˜¶æ®µ1çš„æ ·æœ¬ä¸­æ£€æŸ¥æŠ€æœ¯æŒ‡æ ‡
- é€æ­¥æ”¶ç´§æ¡ä»¶

**ä¼˜åŠ¿**ï¼š
- å¯ä»¥æ‰¾åˆ°æ›´å¤šæ ·æœ¬
- ä¾¿äºåˆ†æå„é˜¶æ®µçš„æ•ˆæœ

---

### æ–¹æ¡ˆ4ï¼šæ£€æŸ¥æ•°æ®è´¨é‡

#### 4.1 éªŒè¯æŠ€æœ¯æŒ‡æ ‡å®Œæ•´æ€§
```python
# æ£€æŸ¥stk_factoræ•°æ®æ˜¯å¦å®Œæ•´
df_factor = dm.get_stk_factor(ts_code, start_date, end_date)
missing_fields = ['macd_dif', 'rsi_6', 'boll_lower', 'ma_20']
for field in missing_fields:
    if field not in df_factor.columns:
        log.warning(f"{ts_code}: ç¼ºå°‘å­—æ®µ {field}")
```

#### 4.2 éªŒè¯çª—å£æ•°æ®å……è¶³æ€§
```python
# æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿçš„å†å²æ•°æ®
if len(df) < 105:
    log.debug(f"{ts_code}: æ•°æ®ä¸è¶³105å¤©ï¼Œå®é™…{len(df)}å¤©")
```

---

## ğŸ“‹ æ¨èæ‰§è¡Œæ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šè¿è¡Œè¯Šæ–­è„šæœ¬
```bash
python scripts/diagnose_left_breakout_screening.py
```

**ç›®çš„**ï¼š
- ç»Ÿè®¡å„æ¡ä»¶çš„é€šè¿‡ç‡
- æ‰¾å‡ºæœ€ä¸¥æ ¼çš„ç“¶é¢ˆæ¡ä»¶
- ä¸ºä¼˜åŒ–æä¾›æ•°æ®æ”¯æŒ

### ç¬¬äºŒæ­¥ï¼šæ ¹æ®è¯Šæ–­ç»“æœè°ƒæ•´é…ç½®

**å¦‚æœæ¡ä»¶1é€šè¿‡ç‡æœ€ä½**ï¼š
- é™ä½æœªæ¥æ¶¨å¹…é˜ˆå€¼ï¼š50% â†’ 35-40%

**å¦‚æœæ¡ä»¶5é€šè¿‡ç‡æœ€ä½**ï¼š
- é™ä½é¢„è½¬ä¿¡å·è¦æ±‚ï¼šè‡³å°‘2ä¸ª â†’ è‡³å°‘1ä¸ª

**å¦‚æœæ¡ä»¶4é€šè¿‡ç‡æœ€ä½**ï¼š
- æ”¾å®½é‡æ¯”èŒƒå›´ï¼š1.5-3.0 â†’ 1.2-4.0

### ç¬¬ä¸‰æ­¥ï¼šæ›´æ–°é…ç½®æ–‡ä»¶

ä¿®æ”¹ `config/settings.yaml`ï¼š
```yaml
left_breakout:
  sample_preparation:
    positive_criteria:
      future_return_threshold: 35    # ä»50é™ä½åˆ°35
      past_return_threshold: 30      # ä»20æé«˜åˆ°30
      volume_ratio_min: 1.2          # ä»1.5é™ä½åˆ°1.2
      volume_ratio_max: 4.0          # ä»3.0æé«˜åˆ°4.0
      min_signals: 1                 # ä»2é™ä½åˆ°1ï¼ˆæ–°å¢é…ç½®ï¼‰
```

### ç¬¬å››æ­¥ï¼šé‡æ–°è¿è¡Œç­›é€‰

```bash
python scripts/prepare_left_breakout_samples.py
```

---

## ğŸ¯ é¢„æœŸæ•ˆæœ

### ä¼˜åŒ–å‰
- æ ·æœ¬æ•°ï¼š0ä¸ª
- é€šè¿‡ç‡ï¼š0%

### ä¼˜åŒ–åï¼ˆé¢„æœŸï¼‰
- æ ·æœ¬æ•°ï¼š100-500ä¸ªï¼ˆå–å†³äºæ•°æ®èŒƒå›´ï¼‰
- é€šè¿‡ç‡ï¼š2-10%

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¸è¦è¿‡åº¦æ”¾å®½**ï¼šæ¡ä»¶å¤ªå®½æ¾ä¼šå¯¼è‡´æ ·æœ¬è´¨é‡ä¸‹é™
2. **é€æ­¥è°ƒæ•´**ï¼šå…ˆæ”¾å®½ä¸€ç‚¹ï¼Œçœ‹æ•ˆæœï¼Œå†å†³å®šæ˜¯å¦ç»§ç»­
3. **ä¿æŒå¹³è¡¡**ï¼šåœ¨æ ·æœ¬æ•°é‡å’Œè´¨é‡ä¹‹é—´æ‰¾åˆ°å¹³è¡¡
4. **éªŒè¯æ•ˆæœ**ï¼šæ‰¾åˆ°æ ·æœ¬åï¼Œéœ€è¦éªŒè¯æ ·æœ¬è´¨é‡

---

## ğŸ“Š ä¼˜åŒ–ä¼˜å…ˆçº§

1. **ç«‹å³æ‰§è¡Œ**ï¼šè¿è¡Œè¯Šæ–­è„šæœ¬ï¼Œæ‰¾å‡ºç“¶é¢ˆ
2. **é«˜ä¼˜å…ˆçº§**ï¼šé™ä½æœªæ¥æ¶¨å¹…é˜ˆå€¼ï¼ˆæ¡ä»¶1ï¼‰
3. **ä¸­ä¼˜å…ˆçº§**ï¼šé™ä½é¢„è½¬ä¿¡å·è¦æ±‚ï¼ˆæ¡ä»¶5ï¼‰
4. **ä½ä¼˜å…ˆçº§**ï¼šæ”¾å®½é‡æ¯”èŒƒå›´ï¼ˆæ¡ä»¶4ï¼‰

---

## âœ… ç¡®è®¤æ¸…å•

åœ¨æ‰§è¡Œä¼˜åŒ–å‰ï¼Œè¯·ç¡®è®¤ï¼š

- [ ] å·²è¿è¡Œè¯Šæ–­è„šæœ¬ï¼Œäº†è§£å„æ¡ä»¶é€šè¿‡ç‡
- [ ] å·²ç¡®å®šæœ€ä¸¥æ ¼çš„ç“¶é¢ˆæ¡ä»¶
- [ ] å·²åˆ¶å®šå…·ä½“çš„ä¼˜åŒ–æ–¹æ¡ˆ
- [ ] å·²æ›´æ–°é…ç½®æ–‡ä»¶
- [ ] å·²å¤‡ä»½å½“å‰é…ç½®ï¼ˆå¦‚éœ€å›æ»šï¼‰

---

**å»ºè®®**ï¼šå…ˆè¿è¡Œè¯Šæ–­è„šæœ¬ï¼Œæ ¹æ®å®é™…æ•°æ®ç¡®å®šä¼˜åŒ–æ–¹æ¡ˆï¼Œå†æ‰§è¡Œä¿®æ”¹ã€‚

