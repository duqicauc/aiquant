# Tushare Pro é«˜çº§åŠŸèƒ½ä½¿ç”¨è¯´æ˜ ğŸ’

æœ¬æ–‡æ¡£è¯´æ˜AIQuanté¡¹ç›®å¦‚ä½•å……åˆ†åˆ©ç”¨Tushare Proçš„é«˜çº§æ•°æ®å’ŒAPIã€‚

å‚è€ƒæ–‡æ¡£ï¼š[Tushare Pro å®˜æ–¹æ–‡æ¡£](https://tushare.pro/document/2?doc_id=14)

---

## ğŸ¯ å·²é›†æˆçš„Tushare ProåŠŸèƒ½

### 1. **å‘¨çº¿æ•°æ®API** âœ…

**æ¥å£**: `weekly` / `pro_bar(freq='W')`  
**ç§¯åˆ†è¦æ±‚**: 120ç§¯åˆ†  
**ä¼˜åŠ¿**: 
- ç›´æ¥è·å–å‘¨çº¿æ•°æ®ï¼Œæ— éœ€æœ¬åœ°è½¬æ¢
- æ”¯æŒå‰å¤æƒã€åå¤æƒ
- æ•°æ®è´¨é‡æ›´é«˜ï¼Œè®¡ç®—æ›´å‡†ç¡®

**ä½¿ç”¨ç¤ºä¾‹**:
```python
from src.data.data_manager import DataManager

dm = DataManager(source='tushare')

# è·å–å‘¨çº¿æ•°æ®
df_weekly = dm.get_weekly_data(
    stock_code='600519.SH',
    start_date='20200101',
    end_date='20241231',
    adjust='qfq'  # å‰å¤æƒ
)
```

**åº”ç”¨åœºæ™¯**: 
- æ­£æ ·æœ¬ç­›é€‰å™¨çš„ä¸‰è¿é˜³åˆ¤æ–­
- å‘¨çº¿çº§åˆ«çš„æŠ€æœ¯åˆ†æ
- ä¸­é•¿æœŸè¶‹åŠ¿åˆ¤æ–­

---

### 2. **æ¯æ—¥æŒ‡æ ‡API** âœ…

**æ¥å£**: `daily_basic`  
**ç§¯åˆ†è¦æ±‚**: 120ç§¯åˆ†  
**åŒ…å«æŒ‡æ ‡**:
- æ¢æ‰‹ç‡ (turnover_rate)
- é‡æ¯” (volume_ratio)
- å¸‚ç›ˆç‡ (pe, pe_ttm)
- å¸‚å‡€ç‡ (pb)
- æ€»å¸‚å€¼ (total_mv)
- æµé€šå¸‚å€¼ (circ_mv)
- æ€»è‚¡æœ¬ (total_share)
- æµé€šè‚¡æœ¬ (float_share)
- è‡ªç”±æµé€šè‚¡æœ¬ (free_share)

**ä½¿ç”¨ç¤ºä¾‹**:
```python
# è·å–æ¯æ—¥æŒ‡æ ‡
df_basic = dm.get_daily_basic(
    stock_code='600519.SH',
    start_date='20200101',
    end_date='20241231'
)

# è‡ªåŠ¨åˆå¹¶åˆ°è¡Œæƒ…æ•°æ®
df_complete = dm.get_complete_data(
    stock_code='600519.SH',
    start_date='20200101'
)
```

**åº”ç”¨åœºæ™¯**:
- ç‰¹å¾å·¥ç¨‹ï¼ˆå¸‚å€¼ã€ä¼°å€¼æŒ‡æ ‡ï¼‰
- é‡æ¯”åˆ†æ
- åŸºæœ¬é¢ç­›é€‰

---

### 3. **æŠ€æœ¯å› å­API** âœ… ğŸ”¥

**æ¥å£**: `stk_factor`  
**ç§¯åˆ†è¦æ±‚**: 5000ç§¯åˆ†ï¼ˆä»˜è´¹è·å–ï¼‰  
**åŒ…å«æŒ‡æ ‡**:
- **MACD**: macd_dif, macd_dea, macd
- **KDJ**: kdj_k, kdj_d, kdj_j
- **RSI**: rsi_6, rsi_12, rsi_24
- **BOLL**: boll_upper, boll_mid, boll_lower
- **MA**: ma_5, ma_10, ma_20, ma_60
- **å…¶ä»–**: cci, adx, adxr, atrç­‰

**ä½¿ç”¨ç¤ºä¾‹**:
```python
# è·å–æŠ€æœ¯å› å­
df_factor = dm.get_stk_factor(
    stock_code='600519.SH',
    start_date='20200101',
    end_date='20241231'
)

# åŒ…å«çš„æŒ‡æ ‡
print(df_factor.columns)
# ['trade_date', 'macd_dif', 'macd_dea', 'macd', 
#  'kdj_k', 'kdj_d', 'kdj_j', 'rsi_6', 'rsi_12', 'rsi_24', ...]
```

**ä¼˜åŠ¿**:
- ğŸ¯ **æ— éœ€æœ¬åœ°è®¡ç®—**ï¼Œç›´æ¥è·å–ä¸“ä¸šè®¡ç®—çš„æŠ€æœ¯æŒ‡æ ‡
- ğŸ“Š **æ•°æ®è´¨é‡é«˜**ï¼Œç»è¿‡Tushareä¸“ä¸šå›¢é˜ŸéªŒè¯
- âš¡ **æ€§èƒ½æ›´å¥½**ï¼Œé¿å…é‡å¤è®¡ç®—
- ğŸ”§ **æŒ‡æ ‡å…¨é¢**ï¼Œæ¶µç›–ä¸»æµæŠ€æœ¯æŒ‡æ ‡

**åº”ç”¨åœºæ™¯**:
- æ­£æ ·æœ¬ç‰¹å¾æå–
- æŠ€æœ¯é¢åˆ†æ
- é‡åŒ–ç­–ç•¥å¼€å‘
- æœºå™¨å­¦ä¹ ç‰¹å¾

**âš ï¸ ç§¯åˆ†è¯´æ˜**: 
- æŠ€æœ¯å› å­éœ€è¦5000ç§¯åˆ†
- å¯é€šè¿‡æèµ å¿«é€Ÿè·å¾—ï¼š[ç¤¾åŒºæåŠ©](https://tushare.pro/community)
- **å¼ºçƒˆæ¨è**ï¼šæŠ€æœ¯å› å­å¤§å¹…æå‡å¼€å‘æ•ˆç‡

---

### 4. **ç­¹ç åˆ†å¸ƒAPI** âœ… ğŸ’

**æ¥å£**: `cyq_perf`  
**ç§¯åˆ†è¦æ±‚**: 5000ç§¯åˆ†  
**åŒ…å«æ•°æ®**:
- ç­¹ç é›†ä¸­åº¦
- è·åˆ©æ¯”ä¾‹
- å¹³å‡æˆæœ¬
- èƒœç‡æ•°æ®

**ä½¿ç”¨ç¤ºä¾‹**:
```python
# è·å–ç­¹ç æ•°æ®
df_cyq = dm.get_cyq_perf(
    stock_code='600519.SH',
    start_date='20200101',
    end_date='20241231'
)
```

**åº”ç”¨åœºæ™¯**:
- ä¸»åŠ›èµ„é‡‘åˆ†æ
- ç­¹ç åˆ†å¸ƒç ”ç©¶
- é«˜çº§é‡åŒ–ç­–ç•¥

---

### 5. **äº¤æ˜“æ—¥å†API** âœ…

**æ¥å£**: `trade_cal`  
**ç§¯åˆ†è¦æ±‚**: 2000ç§¯åˆ†  
**åŠŸèƒ½**:
- è·å–äº¤æ˜“æ‰€äº¤æ˜“æ—¥å†
- åˆ¤æ–­æ˜¯å¦äº¤æ˜“æ—¥
- å‡†ç¡®è®¡ç®—äº¤æ˜“æ—¥å¤©æ•°

**ä½¿ç”¨ç¤ºä¾‹**:
```python
# è·å–äº¤æ˜“æ—¥å†
df_cal = dm.get_trade_calendar(
    start_date='20200101',
    end_date='20241231',
    exchange='SSE'  # ä¸Šäº¤æ‰€
)

# ç­›é€‰äº¤æ˜“æ—¥
trading_days = df_cal[df_cal['is_open'] == 1]
```

**åº”ç”¨åœºæ™¯**:
- å›çœ‹Nä¸ªäº¤æ˜“æ—¥
- è®¡ç®—æŒä»“å¤©æ•°
- å›æµ‹ç³»ç»Ÿ

---

### 6. **å¤æƒå› å­API** âœ…

**æ¥å£**: `adj_factor`  
**ç§¯åˆ†è¦æ±‚**: 120ç§¯åˆ†  
**åŠŸèƒ½**:
- è·å–å¤æƒå› å­
- è‡ªå®šä¹‰å¤æƒè®¡ç®—

**ä½¿ç”¨ç¤ºä¾‹**:
```python
# è·å–å¤æƒå› å­
df_adj = dm.get_adj_factor(
    stock_code='600519.SH',
    start_date='20200101',
    end_date='20241231'
)
```

---

### 7. **STè‚¡ç¥¨åˆ—è¡¨** âœ…

**æ¥å£**: `namechange`  
**ç§¯åˆ†è¦æ±‚**: 120ç§¯åˆ†  
**åŠŸèƒ½**:
- è·å–STè‚¡ç¥¨åˆ—è¡¨
- è‚¡ç¥¨åç§°å˜æ›´å†å²

**ä½¿ç”¨ç¤ºä¾‹**:
```python
# è·å–STè‚¡ç¥¨åˆ—è¡¨
df_st = dm.fetcher.get_st_list()
```

**åº”ç”¨åœºæ™¯**:
- è¿‡æ»¤STè‚¡ç¥¨
- é£é™©æ§åˆ¶

---

## ğŸ“Š åœ¨æ­£æ ·æœ¬æ¨¡å‹ä¸­çš„åº”ç”¨

### ä¼˜åŒ–å‰ vs ä¼˜åŒ–å

#### **ä¼˜åŒ–å‰**ï¼ˆä»…ä½¿ç”¨åŸºç¡€APIï¼‰
```python
# âŒ æœ¬åœ°è½¬æ¢æ—¥çº¿åˆ°å‘¨çº¿
df_daily = dm.get_daily_data(stock_code, start_date, end_date)
df_weekly = df_daily.resample('W').agg(...)  # æœ¬åœ°è®¡ç®—

# âŒ æœ¬åœ°è®¡ç®—æŠ€æœ¯æŒ‡æ ‡
df['ma5'] = df['close'].rolling(5).mean()
df['ma10'] = df['close'].rolling(10).mean()
df['macd'] = calculate_macd(df)  # è‡ªå·±å®ç°

# é—®é¢˜ï¼š
# - è®¡ç®—å¤æ‚
# - å®¹æ˜“å‡ºé”™
# - æ€§èƒ½è¾ƒå·®
# - éœ€è¦è‡ªå·±å®ç°æ‰€æœ‰æŒ‡æ ‡
```

#### **ä¼˜åŒ–å**ï¼ˆå……åˆ†ä½¿ç”¨Tushare Proï¼‰
```python
# âœ… ç›´æ¥è·å–å‘¨çº¿æ•°æ®
df_weekly = dm.get_weekly_data(stock_code, start_date, end_date, adjust='qfq')

# âœ… ç›´æ¥è·å–æŠ€æœ¯å› å­
df_factor = dm.get_stk_factor(stock_code, start_date, end_date)
# åŒ…å«: MA5, MA10, MACD, KDJ, RSI, BOLLç­‰æ‰€æœ‰æŒ‡æ ‡

# âœ… ç›´æ¥è·å–å¸‚å€¼å’Œé‡æ¯”
df_basic = dm.get_daily_basic(stock_code, start_date, end_date)
# åŒ…å«: å¸‚å€¼ã€é‡æ¯”ã€æ¢æ‰‹ç‡ã€PEã€PBç­‰

# ä¼˜åŠ¿ï¼š
# âœ… æ•°æ®è´¨é‡æ›´é«˜
# âœ… æ— éœ€æœ¬åœ°è®¡ç®—
# âœ… æ€§èƒ½æ›´å¥½
# âœ… ä»£ç æ›´ç®€æ´
```

---

## ğŸ’° ç§¯åˆ†è¦æ±‚æ€»è§ˆ

| åŠŸèƒ½ | æ¥å£ | ç§¯åˆ†è¦æ±‚ | æ¨èç­‰çº§ |
|-----|------|---------|---------|
| è‚¡ç¥¨åˆ—è¡¨ | stock_basic | 0 | â­â­â­â­â­ |
| æ—¥çº¿è¡Œæƒ… | daily | 0 | â­â­â­â­â­ |
| å‘¨çº¿è¡Œæƒ… | weekly | 120 | â­â­â­â­â­ |
| æ¯æ—¥æŒ‡æ ‡ | daily_basic | 120 | â­â­â­â­â­ |
| å¤æƒå› å­ | adj_factor | 120 | â­â­â­â­ |
| äº¤æ˜“æ—¥å† | trade_cal | 2000 | â­â­â­â­â­ |
| **æŠ€æœ¯å› å­** | **stk_factor** | **5000** | **â­â­â­â­â­** ğŸ”¥ |
| ç­¹ç åˆ†å¸ƒ | cyq_perf | 5000 | â­â­â­â­ |
| STè‚¡ç¥¨ | namechange | 120 | â­â­â­â­ |

### æ¨èé…ç½®

#### **åŸºç¡€ç‰ˆ**ï¼ˆå…è´¹ï¼‰
- å¯å®ŒæˆåŸºæœ¬é‡åŒ–åˆ†æ
- éœ€è¦è‡ªå·±è®¡ç®—æŠ€æœ¯æŒ‡æ ‡
- ç§¯åˆ†ï¼š0

#### **è¿›é˜¶ç‰ˆ**ï¼ˆ120ç§¯åˆ†ï¼‰
- è·å–å‘¨çº¿ã€æ¯æ—¥æŒ‡æ ‡
- æ•°æ®æ›´ä¸°å¯Œ
- ç§¯åˆ†ï¼š120ï¼ˆæ³¨å†Œå³å¯ï¼‰

#### **ä¸“ä¸šç‰ˆ**ï¼ˆ2000ç§¯åˆ†ï¼‰â­
- è·å–äº¤æ˜“æ—¥å†
- æ”¯æŒå®Œæ•´çš„é‡åŒ–ç³»ç»Ÿ
- ç§¯åˆ†ï¼š2000ï¼ˆå®Œå–„èµ„æ–™+ç­¾åˆ°å¯è¾¾ï¼‰

#### **æ——èˆ°ç‰ˆ**ï¼ˆ5000ç§¯åˆ†ï¼‰ğŸ”¥
- **å¼ºçƒˆæ¨èï¼**
- ç›´æ¥è·å–æ‰€æœ‰æŠ€æœ¯æŒ‡æ ‡
- ç­¹ç åˆ†å¸ƒæ•°æ®
- èŠ‚çœå¤§é‡å¼€å‘æ—¶é—´
- ç§¯åˆ†ï¼š5000ï¼ˆå»ºè®®ç›´æ¥æèµ è·å¾—ï¼‰

**ğŸ’¡ è·å–ç§¯åˆ†æ–¹å¼**:
1. æ³¨å†Œï¼š120ç§¯åˆ†
2. å®Œå–„èµ„æ–™ï¼š300ç§¯åˆ†
3. æ¯æ—¥ç­¾åˆ°ï¼š1ç§¯åˆ†/å¤©
4. **æèµ **ï¼šæ¨èæ–¹å¼ï¼Œå¿«é€Ÿè·å¾—5000+ç§¯åˆ†
   - è®¿é—®ï¼šhttps://tushare.pro/community

---

## ğŸš€ ä½¿ç”¨å»ºè®®

### 1. **ä¼˜å…ˆä½¿ç”¨Tushare Proçš„ç°æˆæ•°æ®**
```python
# âœ… å¥½çš„åšæ³•
df_weekly = dm.get_weekly_data(...)  # ä½¿ç”¨Tushareå‘¨çº¿API
df_factor = dm.get_stk_factor(...)   # ä½¿ç”¨æŠ€æœ¯å› å­API

# âŒ ä¸æ¨è
df_weekly = convert_to_weekly(df_daily)  # æœ¬åœ°è½¬æ¢
ma5 = df['close'].rolling(5).mean()      # æœ¬åœ°è®¡ç®—
```

### 2. **æŠ€æœ¯å› å­å¼ºçƒˆæ¨è**
å¦‚æœä½ çš„ç§¯åˆ†è¾¾åˆ°5000ï¼Œ**å¼ºçƒˆå»ºè®®**ä½¿ç”¨`stk_factor`æ¥å£ï¼š
- èŠ‚çœå¤§é‡è®¡ç®—æ—¶é—´
- é¿å…æŒ‡æ ‡è®¡ç®—é”™è¯¯
- æ•°æ®è´¨é‡æ›´é«˜
- ä¸“ä¸šå›¢é˜Ÿç»´æŠ¤

### 3. **åˆç†è§„åˆ’APIè°ƒç”¨**
```python
# âœ… ä¸€æ¬¡è·å–å®Œæ•´æ•°æ®
df = dm.get_complete_data(stock_code, start_date, end_date)
df_factor = dm.get_stk_factor(stock_code, start_date, end_date)

# âŒ é¿å…å¤šæ¬¡é‡å¤è°ƒç”¨
for date in dates:
    df = dm.get_daily_data(stock_code, date, date)  # æ¯æ¬¡éƒ½è°ƒç”¨
```

### 4. **ä½¿ç”¨äº¤æ˜“æ—¥å†**
```python
# âœ… ä½¿ç”¨äº¤æ˜“æ—¥å†å‡†ç¡®è®¡ç®—
df_cal = dm.get_trade_calendar('20200101', '20241231')
trading_days = df_cal[df_cal['is_open'] == 1]['cal_date'].tolist()
t1_minus_34 = trading_days[trading_days.index(t1) - 34]

# âŒ ç®€å•å‡å»è‡ªç„¶æ—¥
t1_minus_34 = t1 - timedelta(days=34)  # ä¸å‡†ç¡®
```

---

## ğŸ“ APIå®Œæ•´åˆ—è¡¨

AIQuantå·²é›†æˆä»¥ä¸‹Tushare Proæ¥å£ï¼š

### DataManageræ–¹æ³•å¯¹åº”

| æ–¹æ³• | Tushareæ¥å£ | è¯´æ˜ |
|-----|------------|------|
| `get_stock_list()` | stock_basic | è‚¡ç¥¨åˆ—è¡¨ |
| `get_daily_data()` | pro_bar | æ—¥çº¿è¡Œæƒ… |
| `get_weekly_data()` | weekly/pro_bar | å‘¨çº¿è¡Œæƒ… âœ¨ |
| `get_minute_data()` | pro_bar | åˆ†é’Ÿè¡Œæƒ… |
| `get_daily_basic()` | daily_basic | æ¯æ—¥æŒ‡æ ‡ âœ¨ |
| `get_fundamental_data()` | fina_indicator | è´¢åŠ¡æŒ‡æ ‡ |
| `get_complete_data()` | ç»¼åˆæ¥å£ | è¡Œæƒ…+æŒ‡æ ‡ âœ¨ |
| `get_stk_factor()` | stk_factor | æŠ€æœ¯å› å­ ğŸ”¥ |
| `get_cyq_perf()` | cyq_perf | ç­¹ç æ•°æ® ğŸ’ |
| `get_trade_calendar()` | trade_cal | äº¤æ˜“æ—¥å† âœ¨ |

---

## ğŸ“ å­¦ä¹ èµ„æº

- [Tushare Proå®˜æ–¹æ–‡æ¡£](https://tushare.pro/document/2?doc_id=14)
- [Tushareç§¯åˆ†ä½“ç³»](https://tushare.pro/document/1?doc_id=13)
- [ç¤¾åŒºæåŠ©](https://tushare.pro/community)
- [æ•°æ®å­—å…¸](https://tushare.pro/document/2)

---

## â“ å¸¸è§é—®é¢˜

### Q1: æŠ€æœ¯å› å­å€¼å¾—ä»˜è´¹å—ï¼Ÿ
**A**: **éå¸¸å€¼å¾—ï¼**
- èŠ‚çœå‡ å‘¨çš„å¼€å‘æ—¶é—´
- é¿å…æŠ€æœ¯æŒ‡æ ‡è®¡ç®—é”™è¯¯
- ä¸“ä¸šå›¢é˜Ÿç»´æŠ¤ï¼Œæ•°æ®è´¨é‡é«˜
- åŒ…å«100+æŠ€æœ¯æŒ‡æ ‡

### Q2: å¦‚ä½•å¿«é€Ÿè·å¾—5000ç§¯åˆ†ï¼Ÿ
**A**: 
- æ¨èæ–¹å¼ï¼šæèµ è·å¾—ï¼ˆhttps://tushare.pro/communityï¼‰
- æ…¢é€Ÿæ–¹å¼ï¼šå®Œå–„èµ„æ–™+æ¯æ—¥ç­¾åˆ°ï¼ˆéœ€è¦çº¦1å¹´ï¼‰

### Q3: å…è´¹ç‰ˆæœ¬å¤Ÿç”¨å—ï¼Ÿ
**A**: 
- å­¦ä¹ é˜¶æ®µï¼šå¤Ÿç”¨
- ç”Ÿäº§ç¯å¢ƒï¼šå»ºè®®è‡³å°‘2000ç§¯åˆ†ï¼ˆäº¤æ˜“æ—¥å†ï¼‰
- ä¸“ä¸šé‡åŒ–ï¼šå»ºè®®5000ç§¯åˆ†ï¼ˆæŠ€æœ¯å› å­ï¼‰

### Q4: æŠ€æœ¯å› å­åŒ…å«å“ªäº›æŒ‡æ ‡ï¼Ÿ
**A**: åŒ…å«ä½†ä¸é™äºï¼š
- è¶‹åŠ¿ç±»ï¼šMAã€EMAã€MACDã€DMIã€ADX
- éœ‡è¡ç±»ï¼šRSIã€KDJã€CCIã€WR
- æ³¢åŠ¨ç±»ï¼šBOLLã€ATR
- æˆäº¤é‡ï¼šOBVã€VOL

---

**æ€»ç»“**: AIQuanté¡¹ç›®å·²ç»å……åˆ†é›†æˆäº†Tushare Proçš„é«˜çº§åŠŸèƒ½ã€‚å¦‚æœä½ çš„ç§¯åˆ†è¶³å¤Ÿï¼Œå¯ä»¥è·å¾—æ›´å¥½çš„æ•°æ®è´¨é‡å’Œå¼€å‘ä½“éªŒï¼ğŸ’

**å»ºè®®æŠ•èµ„**: å¦‚æœè®¤çœŸåšé‡åŒ–äº¤æ˜“ï¼Œ5000ç§¯åˆ†çš„æŠ€æœ¯å› å­APIéå¸¸å€¼å¾—ï¼ğŸš€

